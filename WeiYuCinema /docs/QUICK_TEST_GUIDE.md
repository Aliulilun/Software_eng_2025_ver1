# 威宇影城系統快速測試指南

## 🚀 快速開始

### 1. 系統準備
```bash
# 1. 啟動 XAMPP
# 2. 確保 Apache 和 MySQL 服務運行
# 3. 訪問 phpMyAdmin: http://localhost/phpmyadmin
# 4. 導入資料庫: WeiYuCinema.sql
# 5. 執行場次更新: update_showing_dates.sql
```

### 2. 測試帳號
- **會員帳號**: M0001
- **密碼**: password123
- **電子信箱**: member1@example.com

## 📋 功能測試清單

### ✅ 登入系統測試
1. 訪問: `http://localhost/WeiYuCinema/`
2. 點擊「會員登入」
3. 輸入測試帳號登入
4. 確認跳轉到會員中心

### ✅ 訂票紀錄查詢系統測試

#### 基本查詢功能
1. **進入查詢頁面**
   - 路徑: 會員中心 → 訂票紀錄查詢
   - 或直接訪問: `http://localhost/WeiYuCinema/member/inquiry/index.php`

2. **查看訂票記錄**
   - 確認顯示現有訂票記錄
   - 測試篩選功能（訂單編號、日期、狀態）
   - 檢查記錄詳細資訊顯示

3. **訂票詳情查看**
   - 點擊任一記錄的「詳情」按鈕
   - 確認顯示完整訂票資訊
   - 檢查電影資訊、場次、座位、餐點、付款資訊

#### 退票功能測試
1. **進入退票頁面**
   - 從訂票記錄點擊「退票」按鈕
   - 或從詳情頁面點擊「申請退票」

2. **退票條件檢查**
   - 確認只有「已完成」狀態的訂單可退票
   - 確認開演前2小時限制

3. **退票流程測試**
   - 填寫退票原因
   - 確認退票（注意：這會實際執行退票）
   - 檢查退款是否退回儲值卡
   - 確認訂單狀態更新為「已退票」

#### 修改訂票測試
1. **進入修改頁面**
   - 從訂票記錄點擊「修改」按鈕

2. **座位修改測試**
   - 查看目前座位
   - 選擇新的可用座位
   - 確認座位數量限制
   - 提交修改並確認成功

### ✅ 儲值卡系統測試

#### 儲值功能測試
1. **進入儲值頁面**
   - 路徑: 會員中心 → 儲值卡管理
   - 或直接訪問: `http://localhost/WeiYuCinema/member/topup/index.php`

2. **查看目前餘額**
   - 確認顯示目前儲值卡餘額
   - 檢查最近交易記錄

3. **執行儲值**
   - 選擇預設金額或輸入自訂金額
   - 提交儲值申請
   - 確認餘額更新
   - 檢查交易記錄新增

#### 交易記錄測試
1. **查看交易歷史**
   - 點擊「查看完整交易記錄」
   - 確認顯示所有交易（儲值、消費、退款）

2. **篩選功能測試**
   - 測試按交易類型篩選
   - 測試按日期範圍篩選

### ✅ 會員資料管理測試

#### 個人資料修改
1. **進入資料管理頁面**
   - 路徑: 會員中心 → 個人資料管理
   - 或直接訪問: `http://localhost/WeiYuCinema/member/profile/profile.php`

2. **查看目前資料**
   - 確認顯示目前會員資料
   - 檢查各欄位資訊

3. **修改基本資料**
   - 修改姓名、電話、生日等資訊
   - 測試資料驗證（格式檢查）
   - 提交修改並確認成功

#### 密碼變更測試
1. **密碼修改流程**
   - 輸入目前密碼
   - 輸入新密碼（兩次確認）
   - 提交變更
   - 確認密碼更新成功

2. **安全驗證測試**
   - 測試目前密碼錯誤情況
   - 測試新密碼不一致情況
   - 測試密碼長度限制

### ✅ 購票系統整合測試

#### 完整購票流程
1. **場次選擇**
   - 進入購票服務
   - 選擇電影、影城、日期
   - 確認顯示可用場次

2. **座位選擇**
   - 選擇場次後進入座位選擇
   - 測試座位選擇功能
   - 確認座位狀態顯示

3. **餐點選擇**
   - 選擇想要的餐點
   - 調整數量
   - 確認價格計算

4. **訂單確認**
   - 檢查訂單摘要
   - 確認總金額計算
   - 提交訂單

5. **付款處理**
   - 確認從儲值卡扣款
   - 檢查餘額更新
   - 確認訂票成功

#### 購票後測試
1. **查看新訂單**
   - 進入訂票記錄查詢
   - 確認新訂單出現
   - 檢查訂單詳細資訊

2. **測試修改功能**
   - 嘗試修改剛建立的訂單
   - 測試座位修改功能

## 🔧 測試資料準備

### 執行 SQL 更新
```sql
-- 在 phpMyAdmin 中執行以下 SQL 更新場次日期
UPDATE showing SET 
    showingDate = CASE 
        WHEN showingId IN ('S00101', 'S00201') THEN CURDATE()
        WHEN showingId IN ('S00102', 'S00202') THEN DATE_ADD(CURDATE(), INTERVAL 1 DAY)
        WHEN showingId IN ('S00301', 'S00401') THEN DATE_ADD(CURDATE(), INTERVAL 2 DAY)
        WHEN showingId IN ('S00302', 'S00402') THEN DATE_ADD(CURDATE(), INTERVAL 3 DAY)
        WHEN showingId IN ('S00501', 'S00502') THEN DATE_ADD(CURDATE(), INTERVAL 4 DAY)
        ELSE showingDate
    END;
```

### 確認測試資料
```sql
-- 檢查會員資料
SELECT * FROM memberProfile WHERE memberId = 'M0001';

-- 檢查儲值卡
SELECT * FROM memberCashCard WHERE memberId = 'M0001';

-- 檢查場次資料
SELECT * FROM showing WHERE showingDate >= CURDATE() ORDER BY showingDate, startTime;

-- 檢查訂票記錄
SELECT * FROM bookingRecord WHERE memberId = 'M0001';
```

## ❌ 常見問題排除

### 1. 購票頁面顯示空白
**原因**: 場次日期過期  
**解決**: 執行場次日期更新 SQL

### 2. 登入後跳轉錯誤
**原因**: Session 設定問題  
**解決**: 檢查 PHP session 設定

### 3. 資料庫連接失敗
**原因**: MySQL 服務未啟動  
**解決**: 重啟 XAMPP MySQL 服務

### 4. 頁面樣式異常
**原因**: CSS 檔案路徑錯誤  
**解決**: 檢查 `/static/css/style.css` 是否存在

### 5. JavaScript 功能失效
**原因**: JS 檔案載入失敗  
**解決**: 檢查 `/static/js/script.js` 是否存在

## 📊 測試結果記錄

### 功能測試檢查表
- [ ] 會員登入/登出
- [ ] 訂票記錄查詢
- [ ] 訂票詳情查看
- [ ] 退票申請流程
- [ ] 修改訂票功能
- [ ] 儲值卡儲值
- [ ] 交易記錄查看
- [ ] 個人資料修改
- [ ] 密碼變更
- [ ] 完整購票流程
- [ ] 系統整合測試

### 效能測試
- [ ] 頁面載入速度
- [ ] 資料庫查詢效率
- [ ] 大量資料處理
- [ ] 並發使用者測試

### 安全測試
- [ ] SQL 注入防護
- [ ] XSS 攻擊防護
- [ ] 登入驗證機制
- [ ] 資料驗證完整性

---

**測試完成後，請確認所有功能正常運作，並記錄任何發現的問題。**
