# 🧪 Browse 功能快速測試指南

## 準備工作

### 1. 確認 XAMPP 已啟動
- ✅ Apache 已啟動
- ✅ MySQL 已啟動

### 2. 確認資料庫已更新
在 phpMyAdmin 執行：
```sql
SELECT memberId, memberName, member, role_id FROM memberProfile;
```
確認 `member` 欄位是 email 格式。

---

## 🔐 測試步驟

### Step 1: 登入測試

1. 開啟瀏覽器訪問：
   ```
   http://localhost/WeiYuCinema/login.php
   ```

2. 使用一般會員帳號登入：
   - **電子信箱：** `ming123@gmail.com`
   - **密碼：** `pw1234`

3. ✅ **預期結果：** 自動跳轉到 `http://localhost/WeiYuCinema/member/index.php`

4. ✅ **確認：** 頁面顯示「歡迎，王小明！」

---

### Step 2: 會員首頁測試

**當前頁面：** `member/index.php`

✅ **檢查項目：**
- [ ] 顯示會員編號（M0001）
- [ ] 顯示會員姓名（王小明）
- [ ] 導覽列包含 7 個連結
- [ ] 快速功能列表正常顯示

---

### Step 3: 電影資訊查詢測試

1. 點擊「瀏覽電影資訊」或訪問：
   ```
   http://localhost/WeiYuCinema/member/browse_movies.php
   ```

2. ✅ **確認顯示 5 部電影：**
   - 沙丘：第二部
   - 可可夜總會
   - 航海王：紅髮歌姬
   - 鬼修女2
   - 芭比

3. **測試關鍵字搜尋：**
   - 輸入「沙丘」→ 應該只顯示 1 筆結果
   - 輸入「導演」→ 測試搜尋導演名稱
   - 清除條件 → 回到全部電影

4. **測試分級篩選：**
   - 選擇「限制級」→ 應該只顯示《鬼修女2》
   - 選擇「普遍級」→ 應該顯示多部電影

5. **測試類型篩選：**
   - 選擇「動畫」→ 應該顯示《可可夜總會》和《航海王》
   - 選擇「動作」→ 應該顯示《沙丘：第二部》

6. **點擊「詳細資訊」：**
   - 進入電影詳細頁面
   - ✅ 確認顯示完整資訊
   - ✅ 確認顯示場次列表

---

### Step 4: 影城資訊查詢測試

1. 點擊「瀏覽影城資訊」或訪問：
   ```
   http://localhost/WeiYuCinema/member/browse_cinemas.php
   ```

2. ✅ **確認顯示 5 個影城：**
   - 台北信義威秀影城
   - 板橋大遠百威秀影城
   - 林口威秀影城
   - 台中大遠百威秀影城
   - 高雄大遠百威秀影城

3. **測試關鍵字搜尋：**
   - 輸入「台北」→ 應該只顯示台北信義威秀
   - 輸入「林口」→ 應該只顯示林口威秀
   - 清除條件 → 回到全部影城

4. **點擊「詳細資訊」：**
   - 進入影城詳細頁面
   - ✅ 確認顯示完整資訊
   - ✅ 確認顯示影廳列表
   - ✅ 確認顯示近期場次

---

### Step 5: 場次查詢測試

1. 點擊「查詢場次」或訪問：
   ```
   http://localhost/WeiYuCinema/member/browse_showings.php
   ```

2. ✅ **確認顯示 10 筆場次資料**

3. **測試電影篩選：**
   - 選擇「沙丘：第二部」
   - ✅ 應該只顯示沙丘的場次（2 筆）

4. **測試影城篩選：**
   - 選擇「台北信義威秀影城」
   - ✅ 應該只顯示該影城的場次

5. **測試日期篩選：**
   - 選擇日期「2025-12-03」
   - ✅ 應該顯示該日期的所有場次

6. **測試版本篩選：**
   - 選擇「IMAX」
   - ✅ 應該只顯示 IMAX 版本的場次

7. **測試組合條件：**
   - 選擇電影 + 影城 + 日期
   - ✅ 應該顯示符合所有條件的場次

---

### Step 6: 電影詳細資訊頁測試

1. 從電影列表點擊任一電影的「詳細資訊」

2. ✅ **確認顯示：**
   - [ ] 電影海報區塊（或「無海報」佔位）
   - [ ] 完整電影資訊表格
   - [ ] 電影介紹文字
   - [ ] 場次列表
   - [ ] 三個按鈕：立即購票、查看場次、返回列表

3. **測試連結：**
   - 點擊「查看場次」→ 跳轉到場次查詢並自動篩選該電影
   - 點擊「返回列表」→ 回到電影列表

---

### Step 7: 影城詳細資訊頁測試

1. 從影城列表點擊任一影城的「詳細資訊」

2. ✅ **確認顯示：**
   - [ ] 影城照片區塊（或「無照片」佔位）
   - [ ] 完整影城資訊表格
   - [ ] 影城介紹文字
   - [ ] Google 地圖連結
   - [ ] 影廳資訊表格
   - [ ] 近期場次列表（最多 20 筆）
   - [ ] 三個按鈕：在此影城購票、查看場次、返回列表

3. **測試連結：**
   - 點擊「查看場次」→ 跳轉到場次查詢並自動篩選該影城
   - 點擊「返回列表」→ 回到影城列表

---

### Step 8: 導覽列測試

在任何會員頁面，測試導覽列的所有連結：

✅ **檢查連結：**
- [ ] 會員首頁 → `member/index.php`
- [ ] 瀏覽電影 → `member/browse_movies.php`
- [ ] 瀏覽影城 → `member/browse_cinemas.php`
- [ ] 查詢場次 → `member/browse_showings.php`
- [ ] 購票服務 → `member/booking.php`（佔位頁）
- [ ] 訂票紀錄 → `member/inquiry.php`（佔位頁）
- [ ] 儲值卡 → `member/topup.php`（佔位頁）
- [ ] 會員資料 → `member/profile.php`（佔位頁）
- [ ] 登出 → `logout.php`

---

### Step 9: 登出測試

1. 點擊導覽列的「登出」

2. ✅ **預期結果：**
   - 自動跳轉到 `login.php`
   - Session 被清除

3. **測試權限保護：**
   - 登出後直接訪問：`http://localhost/WeiYuCinema/member/index.php`
   - ✅ 應該被導向登入頁面並顯示錯誤訊息

---

### Step 10: 管理者登入測試

1. 使用管理者帳號登入：
   - **電子信箱：** `admin@weiyucinema.com`
   - **密碼：** `admin`

2. ✅ **預期結果：**
   - 嘗試跳轉到 `admin/index.php`
   - 因為 admin 資料夾不存在，會顯示 404 錯誤（這是正常的）

3. **驗證角色檢查：**
   - 登入後嘗試訪問：`http://localhost/WeiYuCinema/member/index.php`
   - ✅ 應該被自動導回 `admin/index.php`

---

## 📊 測試檢查表

### 功能測試

- [ ] ✅ 一般會員登入正常
- [ ] ✅ 管理者登入正常（跳轉不同頁面）
- [ ] ✅ 電影列表顯示正常
- [ ] ✅ 電影搜尋功能正常
- [ ] ✅ 電影篩選功能正常
- [ ] ✅ 影城列表顯示正常
- [ ] ✅ 影城搜尋功能正常
- [ ] ✅ 場次列表顯示正常
- [ ] ✅ 場次多條件篩選正常
- [ ] ✅ 電影詳細頁顯示正常
- [ ] ✅ 影城詳細頁顯示正常
- [ ] ✅ 導覽列所有連結正常
- [ ] ✅ 登出功能正常
- [ ] ✅ 未登入時訪問會員頁面被阻擋

### 資料顯示

- [ ] ✅ 會員姓名顯示正確
- [ ] ✅ 電影資料顯示完整
- [ ] ✅ 影城資料顯示完整
- [ ] ✅ 場次資料顯示完整
- [ ] ✅ 圖片佔位區塊顯示正常（因實際圖片不存在）

### 安全性

- [ ] ✅ 未登入無法訪問會員頁面
- [ ] ✅ 管理者無法訪問一般會員頁面
- [ ] ✅ 一般會員無法訪問管理者頁面
- [ ] ✅ 輸出有使用 htmlspecialchars()
- [ ] ✅ 查詢使用 prepared statement

---

## ⚠️ 常見問題

### 問題 1：登入後跳轉到空白頁

**原因：** PHP 錯誤或路徑問題

**解決方法：**
1. 檢查 PHP 錯誤日誌
2. 確認 `member/` 資料夾存在
3. 確認 `member/index.php` 檔案存在

---

### 問題 2：電影或影城列表是空的

**原因：** 資料庫沒有資料

**解決方法：**
```sql
-- 檢查資料
SELECT COUNT(*) FROM movie;
SELECT COUNT(*) FROM cinema;
```

---

### 問題 3：圖片無法顯示

**原因：** 圖片檔案不存在（正常現象）

**說明：** 目前只有資料庫記錄，沒有實際圖片檔案，會顯示「無圖片」或「無海報」的佔位區塊。

---

### 問題 4：場次查詢沒有資料

**原因：** 日期篩選條件不符

**解決方法：**
- 清除日期篩選
- 或選擇資料庫中存在的日期：`2025-12-03`

---

## ✅ 測試完成

完成所有測試後，Browse (Br) 功能即可投入使用！

下一步可以開始開發：
- **Booking (B)** - 購票服務
- **Inquiry (In)** - 訂票紀錄查詢
- **Top Up (T)** - 儲值卡管理
- **Member (M)** - 會員資料管理

---

**測試日期：** 2025-12-04  
**測試版本：** Browse v1.0  
**測試狀態：** ⏳ 待測試

