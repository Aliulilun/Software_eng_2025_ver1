<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å ´æ¬¡æŸ¥è©¢ - å¨å®‡å½±åŸ</title>
    <link rel="stylesheet" href="/WeiYuCinema/static/css/style.css">
</head>
<body>
    <!-- é é¦–ä½”ä½ç¬¦ -->
    <div id="header-placeholder"></div>
    
    <!-- ä¸»è¦å…§å®¹ -->
    <div class="container">
        <div class="page-title">
            <h1>å ´æ¬¡æŸ¥è©¢</h1>
            <p>æŸ¥è©¢é›»å½±æ”¾æ˜ æ™‚é–“</p>
        </div>
        
        <!-- ç¯©é¸åŠŸèƒ½ -->
        <div class="section-box">
            <h2 class="section-title">ğŸ” ç¯©é¸å ´æ¬¡</h2>
            <form method="GET" action="">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="movie">é¸æ“‡é›»å½±</label>
                        <select id="movie" name="movie">
                            <option value="">æ‰€æœ‰é›»å½±</option>
                            <?php foreach ($movies as $movie): ?>
                                <option value="<?php echo $movie['movieId']; ?>" 
                                        <?php echo ($movieFilter == $movie['movieId']) ? 'selected' : ''; ?>>
                                    <?php echo htmlspecialchars($movie['movieName']); ?>
                                </option>
                            <?php endforeach; ?>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="cinema">é¸æ“‡å½±åŸ</label>
                        <select id="cinema" name="cinema">
                            <option value="">æ‰€æœ‰å½±åŸ</option>
                            <?php foreach ($cinemas as $cinema): ?>
                                <option value="<?php echo $cinema['cinemaId']; ?>" 
                                        <?php echo ($cinemaFilter == $cinema['cinemaId']) ? 'selected' : ''; ?>>
                                    <?php echo htmlspecialchars($cinema['cinemaName']); ?>
                                </option>
                            <?php endforeach; ?>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="date">é¸æ“‡æ—¥æœŸ</label>
                        <input type="date" id="date" name="date" value="<?php echo htmlspecialchars($dateFilter); ?>" min="<?php echo date('Y-m-d'); ?>">
                    </div>
                </div>
                
                <div class="text-center">
                    <button type="submit" class="btn btn-primary" style="margin-right: 10px;">ğŸ” æŸ¥è©¢</button>
                    <button type="button" class="btn btn-secondary" onclick="location.href='showings.php'">æ¸…é™¤ç¯©é¸</button>
                </div>
            </form>
        </div>
        
        <!-- å ´æ¬¡åˆ—è¡¨ -->
        <div class="section-box">
            <h2 class="section-title">ğŸ¬ å ´æ¬¡åˆ—è¡¨</h2>
            
            <?php if (!empty($showings)): ?>
                <div style="display: grid; gap: 20px; margin-top: 20px;">
                    <?php foreach ($showings as $showing): ?>
                        <div class="showing-card" style="background: #2c2c2c; border-radius: 12px; padding: 25px; display: grid; grid-template-columns: 1fr auto; gap: 20px; align-items: center;">
                            <div class="showing-info">
                                <h3 style="margin: 0 0 10px 0; color: var(--primary-color); font-size: 20px;">
                                    <?php echo htmlspecialchars($showing['movieName']); ?>
                                </h3>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 15px;">
                                    <div>
                                        <span style="color: var(--text-muted); font-size: 14px;">ğŸ¢ å½±åŸ</span><br>
                                        <span style="font-weight: bold;"><?php echo htmlspecialchars($showing['cinemaName']); ?></span>
                                    </div>
                                    <div>
                                        <span style="color: var(--text-muted); font-size: 14px;">ğŸ­ å»³é™¢</span><br>
                                        <span style="font-weight: bold;"><?php echo htmlspecialchars($showing['theaterName']); ?></span>
                                    </div>
                                    <div>
                                        <span style="color: var(--text-muted); font-size: 14px;">ğŸ“… æ—¥æœŸ</span><br>
                                        <span style="font-weight: bold;"><?php echo date('m/d (D)', strtotime($showing['showingDate'])); ?></span>
                                    </div>
                                    <div>
                                        <span style="color: var(--text-muted); font-size: 14px;">â° æ™‚é–“</span><br>
                                        <span style="font-weight: bold; color: var(--primary-color);"><?php echo htmlspecialchars($showing['startTime']); ?></span>
                                    </div>
                                    <div>
                                        <span style="color: var(--text-muted); font-size: 14px;">ğŸ¥ ç‰ˆæœ¬</span><br>
                                        <span style="font-weight: bold;"><?php echo htmlspecialchars($showing['versionName']); ?></span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="showing-actions" style="text-align: center;">
                                <a href="../booking/booking.php?movie=<?php echo $showing['movieId']; ?>&cinema=<?php echo $showing['cinemaId']; ?>&date=<?php echo $showing['showingDate']; ?>" 
                                   class="btn btn-primary" 
                                   style="padding: 15px 25px; font-size: 16px; font-weight: bold;">
                                    ğŸŸï¸ ç«‹å³è³¼ç¥¨
                                </a>
                            </div>
                        </div>
                    <?php endforeach; ?>
                </div>
            <?php else: ?>
                <div class="text-center" style="padding: 60px 20px;">
                    <div style="font-size: 64px; margin-bottom: 20px; opacity: 0.3;">ğŸ¬</div>
                    <h3 class="text-muted">æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„å ´æ¬¡</h3>
                    <p class="text-muted">è«‹èª¿æ•´ç¯©é¸æ¢ä»¶æˆ–é¸æ“‡å…¶ä»–æ—¥æœŸ</p>
                    <button class="btn btn-primary" onclick="location.href='showings.php'" style="margin-top: 20px;">
                        æŸ¥çœ‹æ‰€æœ‰å ´æ¬¡
                    </button>
                </div>
            <?php endif; ?>
        </div>
        
        <!-- è¿”å›æŒ‰éˆ• -->
        <div class="text-center" style="margin-top: 40px;">
            <a href="../index.php" class="btn btn-secondary" style="padding: 15px 30px; font-size: 16px;">
                â† è¿”å›æœƒå“¡é¦–é 
            </a>
        </div>
    </div>
    
    <!-- é å°¾ä½”ä½ç¬¦ -->
    <div id="footer-placeholder"></div>
    
    <!-- è¼‰å…¥æ ¸å¿ƒJavaScript -->
    <script src="/WeiYuCinema/static/js/script.js"></script>
    
    <script>
        // å ´æ¬¡å¡ç‰‡æ‡¸åœæ•ˆæœ
        document.querySelectorAll('.showing-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-3px)';
                this.style.boxShadow = '0 12px 30px rgba(0,0,0,0.6)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.4)';
            });
        });
    </script>
</body>
</html>
